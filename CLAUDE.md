# CLAUDE.md - AI開発アシスタントガイドライン

このドキュメントはAIアシスタント（Claude等）がこのプロジェクトで作業する際の重要な情報とガイドラインをまとめたものです。

## プロジェクト概要

- **プロジェクト名**: International School English Learning App
- **対象**: インターナショナルスクールに通う日本人の子供（小学生）
- **目的**: 日英バイリンガル対応の実用的な英語学習アプリケーション
- **技術的制約**: フロントエンドのみ、サーバーレス、オフライン対応

## 開発環境

### 必須コマンド
```bash
# 開発サーバー起動
npm run dev

# ビルド
npm run build

# テスト実行
npm run test
npm run test:e2e  # Playwright E2Eテスト

# コード品質チェック（コミット前に必ず実行）
npm run lint
npm run typecheck
npm run test:unit
```

### プロジェクト構造
```
/src
  /components    # Reactコンポーネント
  /hooks        # カスタムフック
  /pages        # ページコンポーネント
  /services     # ビジネスロジック
  /stores       # 状態管理（Zustand）
  /utils        # ユーティリティ関数
  /assets       # 画像、音声ファイル
  /styles       # グローバルスタイル
/tests
  /unit         # ユニットテスト
  /e2e          # Playwrightテスト
```

## コーディング規約

### TypeScript
- **strict mode**: 必須
- **型定義**: anyの使用禁止
- **命名規則**: 
  - コンポーネント: PascalCase
  - 関数・変数: camelCase
  - 定数: UPPER_SNAKE_CASE

### React
- **関数コンポーネント**: クラスコンポーネント禁止
- **カスタムフック**: use接頭辞必須
- **メモ化**: 必要に応じてuseMemo, useCallback使用

### スタイリング
- **Tailwind CSS**: 優先使用
- **CSS Modules**: 複雑なスタイルの場合
- **インラインスタイル**: 避ける

## テスト戦略

### ユニットテスト
- **カバレッジ目標**: 80%以上
- **テスト対象**: 
  - ユーティリティ関数
  - カスタムフック
  - 重要なビジネスロジック

### E2Eテスト（Playwright）
- **対象シナリオ**:
  - ユーザーの主要な学習フロー
  - ゲームの完全なプレイスルー
  - 進捗保存と復元
- **ヘッドレステスト**: CI/CDで自動実行

### テストファイル命名
- ユニット: `*.test.ts(x)`
- E2E: `*.spec.ts`

## セキュリティとプライバシー

- **個人情報**: 収集しない
- **データ保存**: LocalStorageのみ使用
- **外部API**: 使用しない
- **音声認識**: ブラウザAPIのみ、外部送信なし

## パフォーマンス要件

- **初回ロード**: 3秒以内
- **ページ遷移**: 即座
- **アニメーション**: 60fps維持
- **バンドルサイズ**: 1MB以下（gzip後）

## アクセシビリティ

- **WCAG 2.1 Level AA**: 準拠
- **キーボード操作**: 完全対応
- **スクリーンリーダー**: 基本対応
- **色覚多様性**: 考慮したデザイン

## 子ども向けUI/UX原則

1. **大きなタッチターゲット**: 最小44x44px
2. **明確なフィードバック**: 音と視覚効果
3. **エラー処理**: 優しい言葉で説明
4. **時間制限なし**: プレッシャーを与えない
5. **ポジティブな強化**: 失敗を罰しない

## Git規約

### コミットメッセージ
```
<type>(<scope>): <subject>

<body>

<footer>
```

Types:
- feat: 新機能
- fix: バグ修正
- docs: ドキュメント
- style: フォーマット
- refactor: リファクタリング
- test: テスト
- chore: ビルド、補助ツール

### ブランチ戦略
- main: 本番環境
- develop: 開発ブランチ
- feature/*: 機能開発
- fix/*: バグ修正

## デプロイメント

- **ホスティング**: Vercel/Netlify推奨
- **PWA**: 必須（オフライン対応）
- **CDN**: 静的アセットは必ずCDN経由

## 重要な注意事項

1. **日本語対応**: すべてのUIテキストは日英切り替え可能に
2. **音声ファイル**: MP3形式、最適化必須
3. **画像**: WebP形式優先、適切な圧縮
4. **フォント**: 日本語対応フォント必須
5. **ブラウザ対応**: Chrome, Safari, Edge最新版

## トラブルシューティング

- **音声が再生されない**: ユーザージェスチャー必要
- **LocalStorage制限**: 5MB以内に収める
- **PWAインストール**: HTTPSが必須

## 連絡先・リソース

- 設計書: `/project-plan.md`
- テスト計画: `/docs/test-strategy.md`
- コントリビューション: `/CONTRIBUTING.md`